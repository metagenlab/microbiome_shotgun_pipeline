rule orfing_with_prodigal:
    conda:
        "../../envs/prodigal.yml"
    singularity:
        "docker://quay.io/biocontainers/prodigal:2.6.3--1"
    input:
        contigs = "samples/{sample}/assembly/spades/large_contigs_edit.fasta"
    output:
        "samples/{sample}/gene_call/{sample}.faa",
        "samples/{sample}/gene_call/{sample}.gbk",
    log:
        "samples/{sample}/gene_call/prodigal/{sample}.log",
    shell:
        """
        prodigal -a {output[0]} -i {input[contigs]} -m -o {output[1]} -q -f 'gbk' -p meta
        """
